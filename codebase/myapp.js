!function(t){var e={};function r(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(o,n,function(e){return t[e]}.bind(null,n));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/codebase/",r(r.s=13)}([function(t,e,r){"use strict";r.d(e,"a",function(){return o});var o="../../translator/public/"},function(t,e,r){"use strict";r.d(e,"d",function(){return M}),r.d(e,"b",function(){return y}),r.d(e,"c",function(){return f}),r.d(e,"a",function(){return v});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(e){s(this,t),this.webixJet=!0,this.webix=e,this._events=[],this._subs={},this._data={}}return t.prototype.getRoot=function(){return this._root},t.prototype.destructor=function(){this._detachEvents(),this._destroySubs(),this._events=this._container=this.app=this._parent=this._root=null},t.prototype.setParam=function(t,e,r){this._data[t]!==e&&(this._data[t]=e,this._segment.update(t,e,0),r&&this.show(null))},t.prototype.getParam=function(t,e){var r=this._data[t];if(void 0!==r||!e)return r;var o=this.getParentView();return o?o.getParam(t,e):void 0},t.prototype.getUrl=function(){return this._segment.suburl()},t.prototype.getUrlString=function(){return this._segment.toString()},t.prototype.getParentView=function(){return this._parent},t.prototype.$$=function(t){if("string"==typeof t){var e=this.getRoot();return e.queryView(function(r){return(r.config.id===t||r.config.localId===t)&&r.$scope===e.$scope},"self")}return t},t.prototype.on=function(t,e,r){var o=t.attachEvent(e,r);return this._events.push({obj:t,id:o}),o},t.prototype.contains=function(t){for(var e in this._subs){var r=this._subs[e].view;if(r===t||r.contains(t))return!0}return!1},t.prototype.getSubView=function(t){var e=this.getSubViewInfo(t);if(e)return e.subview.view},t.prototype.getSubViewInfo=function(t){var e=this._subs[t||"default"];return e?{subview:e,parent:this}:"_top"===t?(this._subs[t]={url:"",id:null,popup:!0},this.getSubViewInfo(t)):this._parent?this._parent.getSubViewInfo(t):null},t.prototype._detachEvents=function(){for(var t=this._events,e=t.length-1;e>=0;e--)t[e].obj.detachEvent(t[e].id)},t.prototype._destroySubs=function(){for(var t in this._subs){var e=this._subs[t].view;e&&e.destructor()}this._subs={}},t.prototype._init_url_data=function(){var t=this._segment.current();this._data={},this.webix.extend(this._data,t.params,!0)},t.prototype._getDefaultSub=function(){if(this._subs.default)return this._subs.default;for(var t in this._subs){var e=this._subs[t];if(!e.branch&&e.view&&"_top"!==t){var r=e.view._getDefaultSub();if(r)return r}}},t.prototype._routed_view=function(){var t=this.getParentView();if(!t)return!0;var e=t._getDefaultSub();return!(!e&&e!==this)&&t._routed_view()},t}();function u(t){"/"===t[0]&&(t=t.substr(1));for(var e=t.split("/"),r=[],o=0;o<e.length;o++){var n=e[o],i={},s=n.indexOf(":");if(-1===s&&(s=n.indexOf("?")),-1!==s){var a=n.substr(s+1).split(/[\:\?\&]/g),u=Array.isArray(a),c=0;for(a=u?a:a[Symbol.iterator]();;){var l;if(u){if(c>=a.length)break;l=a[c++]}else{if((c=a.next()).done)break;l=c.value}var p=l.split("=");i[p[0]]=decodeURIComponent(p[1])}}r[o]={page:s>-1?n.substr(0,s):n,params:i,isNew:!0}}return r}function c(t){var e=[],r=t,o=Array.isArray(r),n=0;for(r=o?r:r[Symbol.iterator]();;){var i;if(o){if(n>=r.length)break;i=r[n++]}else{if((n=r.next()).done)break;i=n.value}var s=i;e.push("/"+s.page);var a=l(s.params);a&&e.push("?"+a)}return e.join("")}function l(t){var e=[];for(var r in t)e.length&&e.push("&"),e.push(r+"="+encodeURIComponent(t[r]));return e.join("")}var p=function(){function t(e,r){s(this,t),this._next=1,this.route="string"==typeof e?{url:u(e),path:e}:e,this.index=r}return t.prototype.current=function(){return this.route.url[this.index]},t.prototype.next=function(){return this.route.url[this.index+this._next]},t.prototype.suburl=function(){return this.route.url.slice(this.index)},t.prototype.shift=function(){return new t(this.route,this.index+this._next)},t.prototype.refresh=function(){for(var t=this.route.url,e=this.index+1;e<t.length;e++)t[e].isNew=!0},t.prototype.toString=function(){var t=c(this.suburl());return t?t.substr(1):""},t.prototype._join=function(t,e){var r=this.route.url;if(null===t)return r;var o=this.route.url;if(r=o.slice(0,this.index+(e?this._next:0)),t){r=r.concat(u(t));for(var n=0;n<r.length;n++)o[n]&&(r[n].view=o[n].view),o[n]&&r[n].page===o[n].page&&(r[n].isNew=!1)}return r},t.prototype.append=function(t){var e=this._join(t,!0);return this.route.path=c(e),this.route.url=e,this.route.path},t.prototype.show=function(t,e,r){var o=this,n=this._join(t,r);return new Promise(function(t,r){var i=c(n),s={url:n,redirect:i,confirm:Promise.resolve()},a=e?e.app:null;if(a&&!a.callEvent("app:guard",[s.redirect,e,s]))return void r();s.confirm.catch(function(){return s.redirect=null}).then(function(){if(null!==s.redirect){if(s.redirect!==i)return a.show(s.redirect),void r();o.route.path=i,o.route.url=n,t()}else r()})})},t.prototype.size=function(t){this._next=t},t.prototype.split=function(){var e={url:this.route.url.slice(this.index+1),path:""};return e.url.length&&(e.path=c(e.url)),new t(e,0)},t.prototype.update=function(t,e,r){var o=this.route.url[this.index+(r||0)];if(!o)return this.route.url.push({page:"",params:{}}),this.update(t,e,r);""===t?o.page=e:o.params[t]=e,this.route.path=c(this.route.url)},t}(),f=function(t){function e(r,o){s(this,e);var i=n(this,t.call(this,r.webix));return i.app=r,i._children=[],i}return i(e,t),e.prototype.ui=function(t,e){var r=(e=e||{}).container||t.container,n=this.app.createView(t);return this._children.push(n),n.render(r,this._segment,this),"object"!==(void 0===t?"undefined":o(t))||t instanceof a?n:n.getRoot()},e.prototype.show=function(t,e){if(e=e||{},"object"===(void 0===t?"undefined":o(t))){for(var r in t)this.setParam(r,t[r]);t=null}else{if("/"===t.substr(0,1))return this.app.show(t);if(0===t.indexOf("./")&&(t=t.substr(2)),0===t.indexOf("../")){var n=this.getParentView();return n?n.show(t.substr(3),e):this.app.show("/"+t.substr(3))}var i=this.getSubViewInfo(e.target);if(i){if(i.parent!==this)return i.parent.show(t,e);if(e.target&&"default"!==e.target)return this._renderFrameLock(e.target,i.subview,t)}else if(t)return this.app.show("/"+t)}return this._show(this._segment,t,this)},e.prototype._show=function(t,e,r){var o=this;return t.show(e,r,!0).then(function(){return o._init_url_data(),o._urlChange()}).then(function(){t.route.linkRouter&&(o.app.getRouter().set(t.route.path,{silent:!0}),o.app.callEvent("app:route",[t.route.path]))})},e.prototype.init=function(t,e){},e.prototype.ready=function(t,e){},e.prototype.config=function(){this.app.webix.message("View:Config is not implemented")},e.prototype.urlChange=function(t,e){},e.prototype.destroy=function(){},e.prototype.destructor=function(){this.destroy(),this._destroyKids(),this._root.destructor(),t.prototype.destructor.call(this)},e.prototype.use=function(t,e){t(this.app,this,e)},e.prototype.refresh=function(){this.getUrl();return this.destroy(),this._destroyKids(),this._destroySubs(),this._detachEvents(),this._container.tagName&&this._root.destructor(),this._segment.refresh(),this._render(this._segment)},e.prototype.render=function(t,e,r){var o=this;"string"==typeof e&&(e=new p(e,0)),this._segment=e,this._parent=r,this._init_url_data();var n="string"==typeof(t=t||document.body)?this.webix.toNode(t):t;return this._container!==n?(this._container=n,this._render(e)):this._urlChange().then(function(){return o.getRoot()})},e.prototype._render=function(t){var e=this,r=this.config();return r.then?r.then(function(r){return e._render_final(r,t)}):this._render_final(r,t)},e.prototype._render_final=function(t,e){var r=this,o=null,n=null,i=!1;if(this._container.tagName?n=this._container:(o=this._container).popup?(n=document.body,i=!0):n=this.webix.$$(o.id),!this.app||!n)return Promise.reject(null);var s=void 0,a=this._segment.current(),u={ui:{}};this.app.copyConfig(t,u.ui,this._subs),this.app.callEvent("app:render",[this,e,u]),u.ui.$scope=this,!o&&a.isNew&&a.view&&a.view.destructor();try{if(o&&!i){var c=n,l=c.getParentView();l&&"multiview"===l.name&&!u.ui.id&&(u.ui.id=c.config.id)}this._root=this.app.webix.ui(u.ui,n);var p=this._root;i&&p.setPosition&&!p.isVisible()&&p.show(),o&&(o.view&&o.view!==this&&o.view!==this.app&&o.view.destructor(),o.id=this._root.config.id,this.getParentView()||!this.app.app?o.view=this:o.view=this.app),a.isNew&&(a.view=this,a.isNew=!1),s=Promise.resolve(this._init(this._root,e)).then(function(){return r._urlChange().then(function(){return r._initUrl=null,r.ready(r._root,e.suburl())})})}catch(t){s=Promise.reject(t)}return s.catch(function(t){return r._initError(r,t)})},e.prototype._init=function(t,e){return this.init(t,e.suburl())},e.prototype._urlChange=function(){var t=this;this.app.callEvent("app:urlchange",[this,this._segment]);var e=[];for(var r in this._subs){var o=this._subs[r],n=this._renderFrameLock(r,o,null);n&&e.push(n)}return Promise.all(e).then(function(){return t.urlChange(t._root,t._segment.suburl())})},e.prototype._renderFrameLock=function(t,e,r){if(!e.lock){var o=this._renderFrame(t,e,r);o&&(e.lock=o.then(function(){return e.lock=null},function(){return e.lock=null}))}return e.lock},e.prototype._renderFrame=function(t,e,r){if("default"===t){if(this._segment.next())return this._createSubView(e,this._segment.shift());e.view&&e.popup&&(e.view.destructor(),e.view=null)}if(null!==r&&(e.url=r),e.route){if(null!==r)return this._show(e.route,e.url,e.view);if(e.branch)return}var o=e.view;if(!o&&e.url){if("string"==typeof e.url)return e.route=new p(e.url,0),this._createSubView(e,e.route);"function"!=typeof e.url||o instanceof e.url||(o=new e.url(this.app,"")),o||(o=e.url)}if(o)return o.render(e,e.route||this._segment,this)},e.prototype._initError=function(t,e){return this.app&&this.app.error("app:error:initview",[e,t]),!0},e.prototype._createSubView=function(t,e){var r=this;return this.app.createFromURL(e.current(),t.view).then(function(o){return o.render(t,e,r)})},e.prototype._destroyKids=function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e]&&t[e].destructor&&t[e].destructor();this._children=[]},e}(a),h=function(t){function e(r,o){s(this,e);var i=n(this,t.call(this,r,o));return i._ui=o.ui,i}return i(e,t),e.prototype.config=function(){return this._ui},e}(f),d=function(){function t(e,r,o){s(this,t),this.path="",this.app=o}return t.prototype.set=function(t,e){this.path=t;var r=this.app;r.app.getRouter().set(r._segment.append(this.path),{silent:!0})},t.prototype.get=function(){return this.path},t}(),w=!0,g=function(t){function e(r){s(this,e);var o=(r||{}).webix||window.webix,i=n(this,t.call(this,o));return i.config=i.webix.extend({name:"App",version:"1.0",start:"/home"},r,!0),i.app=i.config.app,i.ready=Promise.resolve(),i._services={},i.webix.extend(i,i.webix.EventSystem),i}return i(e,t),e.prototype.getUrl=function(){return this._subSegment.suburl()},e.prototype.getUrlString=function(){return this._subSegment.toString()},e.prototype.getService=function(t){var e=this._services[t];return"function"==typeof e&&(e=this._services[t]=e(this)),e},e.prototype.setService=function(t,e){this._services[t]=e},e.prototype.destructor=function(){this.getSubView().destructor(),t.prototype.destructor.call(this)},e.prototype.copyConfig=function(t,e,r){if((t instanceof a||"function"==typeof t&&t.prototype instanceof a)&&(t={$subview:t}),void 0!==t.$subview)return this.addSubView(t,e,r);for(var n in e=e||(t instanceof Array?[]:{}),t){var i=t[n];if("function"==typeof i&&i.prototype instanceof a&&(i={$subview:i}),!i||"object"!==(void 0===i?"undefined":o(i))||i instanceof this.webix.DataCollection||i instanceof RegExp)e[n]=i;else if(i instanceof Date)e[n]=new Date(i);else{var s=this.copyConfig(i,i instanceof Array?[]:{},r);null!==s&&(e[n]=s)}}return e},e.prototype.getRouter=function(){return this.$router},e.prototype.clickHandler=function(t){if(t){var e=t.target||t.srcElement;if(e&&e.getAttribute){var r=e.getAttribute("trigger");r&&this._forView(e,function(t){return t.app.trigger(r)});var o=e.getAttribute("route");o&&this._forView(e,function(t){return t.show(o)})}}},e.prototype.getRoot=function(){return this.getSubView().getRoot()},e.prototype.refresh=function(){var t=this;return this._subSegment?this.getSubView().refresh().then(function(e){return t.callEvent("app:route",[t.getUrl()]),e}):Promise.resolve(null)},e.prototype.loadView=function(t){var e=this,r=this.config.views,o=null;if(""===t)return Promise.resolve(this._loadError("",new Error("Webix Jet: Empty url segment")));try{r&&"string"==typeof(o="function"==typeof r?r(t):r[t])&&(t=o,o=null),o||(o="_blank"===t?{}:this._loadViewDynamic(t))}catch(e){o=this._loadError(t,e)}return o.then||(o=Promise.resolve(o)),o=o.then(function(t){return t.__esModule?t.default:t}).catch(function(r){return e._loadError(t,r)})},e.prototype._forView=function(t,e){var r=this.webix.$$(t);r&&e(r.$scope)},e.prototype._loadViewDynamic=function(t){return null},e.prototype.createFromURL=function(t,e){var r=this;return t.isNew||!t.view?this.loadView(t.page).then(function(t){return r.createView(t,name)}):Promise.resolve(t.view)},e.prototype.createView=function(t,r){if("function"==typeof t){if(t.prototype instanceof e)return new t({app:this,name:r,router:d});if(t.prototype instanceof a)return new t(this,{name:r});t=t(this)}return t instanceof a?t:new h(this,{name:r,ui:t})},e.prototype.show=function(t){return this.render(this._container,t||this.config.start)},e.prototype.trigger=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];this.apply(t,r)},e.prototype.apply=function(t,e){this.callEvent(t,e)},e.prototype.action=function(t){return this.webix.bind(function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];this.apply(t,r)},this)},e.prototype.on=function(t,e){this.attachEvent(t,e)},e.prototype.use=function(t,e){t(this,null,e)},e.prototype.error=function(t,e){if(this.callEvent(t,e),this.callEvent("app:error",e),this.config.debug)for(var r=0;r<e.length;r++)if(console.error(e[r]),e[r]instanceof Error){var o=e[r].message;0===o.indexOf("Module build failed")?(o=o.replace(/\x1b\[[0-9;]*m/g,""),document.body.innerHTML="<pre style='font-size:16px; background-color: #ec6873; color: #000; padding:10px;'>"+o+"</pre>"):(o+="<br><br>Check console for more details",this.webix.message({type:"error",text:o,expire:-1}))}},e.prototype.render=function(t,e,r){var o=this;this._container="string"==typeof t?this.webix.toNode(t):t||document.body;var n=null;!this.$router?(w&&(this.webix.attachEvent("onClick",function(t){return o.clickHandler(t)}),w=!1),"string"==typeof e&&(e=new p(e,0)),this._subSegment=this._first_start(e),this._subSegment.route.linkRouter=!0):n="string"==typeof e?e:this.app?e.split().route.path:e.toString();var i=this.getSubView(),s=this._subSegment,a=s.show(n,i).then(function(){return o.createFromURL(s.current(),i)}).then(function(e){return e.render(t,s)}).then(function(t){return o.$router.set(s.route.path,{silent:!0}),o.callEvent("app:route",[o.getUrl()]),t});return this.ready=this.ready.then(function(){return a}),a},e.prototype.getSubView=function(){return this._subSegment?this._subSegment.current().view:new f(this,{})},e.prototype._first_start=function(t){var e=this;this._segment=t;if(this.$router=new this.config.router(function(t){return setTimeout(function(){e.show(t)},1)},this.config,this),this._container===document.body&&!1!==this.config.animation){var r=this._container;this.webix.html.addCss(r,"webixappstart"),setTimeout(function(){e.webix.html.removeCss(r,"webixappstart"),e.webix.html.addCss(r,"webixapp")},10)}if(t)this.app&&(t.current().view=this,t=t.next()?t.split():new p(this.config.start,0));else{var o=this.$router.get();o||(o=this.config.start,this.$router.set(o,{silent:!0})),t=new p(o,0)}return t},e.prototype._loadError=function(t,e){return this.error("app:error:resolve",[e,t]),{template:" "}},e.prototype.addSubView=function(t,e,r){var o=!0!==t.$subview?t.$subview:null,n=t.name||(o?this.webix.uid():"default");return e.id=t.id||"s"+this.webix.uid(),(r[n]={id:e.id,url:o,branch:t.branch,popup:t.popup}).popup?null:e},e}(a),v=function(){function t(e,r){var o=this;s(this,t),this.config=r||{},this._detectPrefix(),this.cb=e,window.onpopstate=function(){return o.cb(o.get())}}return t.prototype.set=function(t,e){var r=this;if(this.config.routes){var o=t.split("?",2);for(var n in this.config.routes)if(this.config.routes[n]===o[0]){t=n+(o.length>1?"?"+o[1]:"");break}}this.get()!==t&&window.history.pushState(null,null,this.prefix+this.sufix+t),e&&e.silent||setTimeout(function(){return r.cb(t)},1)},t.prototype.get=function(){var t=this._getRaw().replace(this.prefix,"").replace(this.sufix,"");if(t="/"!==t?t:"",this.config.routes){var e=t.split("?",2),r=this.config.routes[e[0]];r&&(t=r+(e.length>1?"?"+e[1]:""))}return t},t.prototype._detectPrefix=function(){var t=this.config.routerPrefix;this.sufix="#"+(void 0===t?"!":t),this.prefix=document.location.href.split("#",2)[0]},t.prototype._getRaw=function(){return document.location.href},t}(),b=!1;function m(t){if(!b&&t){b=!0;var e=window;e.Promise||(e.Promise=t.promise);var r=t.version.split(".");10*r[0]+1*r[1]<53&&(t.ui.freeze=function(e){var r=e();return r&&r.then?r.then(function(e){return t.ui.$freeze=!1,t.ui.resize(),e}):(t.ui.$freeze=!1,t.ui.resize()),r});var n=t.ui.baselayout.prototype.addView,i=t.ui.baselayout.prototype.removeView,s={addView:function(t,e){var r=this;if(!this.$scope||!this.$scope.webixJet)return n.apply(this,arguments);var i=function(){var o=r.$scope,i={};t=o.app.copyConfig(t,{},i),n.apply(r,[t,e]);var s=function(t){o._renderFrame(t,i[t],null).then(function(){o._subs[t]=i[t]})};for(var a in i)s(a);return{v:t.id}}();return"object"===(void 0===i?"undefined":o(i))?i.v:void 0},removeView:function(){if(i.apply(this,arguments),this.$scope&&this.$scope.webixJet){var e=this.$scope._subs;for(var r in e){var o=e[r];t.$$(o.id)||(o.view.destructor(),delete e[r])}}}};t.extend(t.ui.layout.prototype,s,!0),t.extend(t.ui.baselayout.prototype,s,!0),t.protoUI({name:"jetapp",$init:function(e){this.$app=new this.app(e);var r=t.uid().toString();for(var o in e.body={id:r},this.$ready.push(function(){this.$app.render({id:r})}),this.$app){var n=this.$app[o];"function"!=typeof n||this[o]||(this[o]=n.bind(this.$app))}}},t.ui.proxy)}}var y=function(t){function e(r){s(this,e),r.router=r.router||v;var o=n(this,t.call(this,r));return m(o.webix),o}return i(e,t),e.prototype._loadViewDynamic=function(t){return t=t.replace(/\./g,"/"),r(15)("./"+t)},e}(g);(function(){function t(e,r,o){s(this,t),this.storage=r.storage||o.webix.storage.session,this.name=r.storeName||r.id+":route",this.cb=e}t.prototype.set=function(t,e){var r=this;this.storage.put(this.name,t),e&&e.silent||setTimeout(function(){return r.cb(t)},1)},t.prototype.get=function(){return this.storage.get(this.name)}})(),function(t){function e(){return s(this,e),n(this,t.apply(this,arguments))}i(e,t),e.prototype._detectPrefix=function(){this.prefix="",this.sufix=this.config.routerPrefix||""},e.prototype._getRaw=function(){return document.location.pathname}}(v),function(){function t(e,r){s(this,t),this.path="",this.cb=e}t.prototype.set=function(t,e){var r=this;this.path=t,e&&e.silent||setTimeout(function(){return r.cb(t)},1)},t.prototype.get=function(){return this.path}}();function _(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function $(t,e,r){for(var o in t)_(t,o)&&e.call(r||t,t[o],o,t)}function x(t){t="Warning: "+t,"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(t){}}var S=String.prototype.replace,E=String.prototype.split,T="||||",I=function(t){var e=t%10;return 11!==t&&1===e?0:2<=e&&e<=4&&!(t>=12&&t<=14)?1:2},O={arabic:function(t){if(t<3)return t;var e=t%100;return e>=3&&e<=10?3:e>=11?4:5},bosnian_serbian:I,chinese:function(){return 0},croatian:I,french:function(t){return t>1?1:0},german:function(t){return 1!==t?1:0},russian:I,lithuanian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=9&&(t%100<11||t%100>19)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){if(1===t)return 0;var e=t%10;return 2<=e&&e<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0},slovenian:function(t){var e=t%100;return 1===e?0:2===e?1:3===e||4===e?2:3}},W={arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]};function j(t){var e,r=(e={},$(W,function(t,r){$(t,function(t){e[t]=r})}),e);return r[t]||r[E.call(t,/-/,1)[0]]||r.en}function k(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var P=/\$/g,R="$$",V=/%\{(.*?)\}/g;function F(t,e,r,o){if("string"!=typeof t)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==e)return t;var n=t,i=o||V,s="number"==typeof e?{smart_count:e}:e;if(null!=s.smart_count&&n){var a=E.call(n,T);n=(a[function(t,e){return O[j(t)](e)}(r||"en",s.smart_count)]||a[0]).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}return n=S.call(n,i,function(t,e){return _(s,e)&&null!=s[e]?S.call(s[e],P,R):t})}function L(t){var e=t||{};this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en";var r=e.allowMissing?F:null;this.onMissingKey="function"==typeof e.onMissingKey?e.onMissingKey:r,this.warn=e.warn||x,this.tokenRegex=function(t){var e=t&&t.prefix||"%{",r=t&&t.suffix||"}";if(e===T||r===T)throw new RangeError('"'+T+'" token is reserved for pluralization');return new RegExp(k(e)+"(.*?)"+k(r),"g")}(e.interpolation)}L.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},L.prototype.extend=function(t,e){$(t,function(t,r){var n=e?e+"."+r:r;"object"===(void 0===t?"undefined":o(t))?this.extend(t,n):this.phrases[n]=t},this)},L.prototype.unset=function(t,e){"string"==typeof t?delete this.phrases[t]:$(t,function(t,r){var n=e?e+"."+r:r;"object"===(void 0===t?"undefined":o(t))?this.unset(t,n):delete this.phrases[n]},this)},L.prototype.clear=function(){this.phrases={}},L.prototype.replace=function(t){this.clear(),this.extend(t)},L.prototype.t=function(t,e){var r,o,n=null==e?{}:e;if("string"==typeof this.phrases[t])r=this.phrases[t];else if("string"==typeof n._)r=n._;else if(this.onMissingKey){o=(0,this.onMissingKey)(t,n,this.currentLocale,this.tokenRegex)}else this.warn('Missing translation for key: "'+t+'"'),o=t;return"string"==typeof r&&(o=F(r,n,this.currentLocale,this.tokenRegex)),o},L.prototype.has=function(t){return _(this.phrases,t)},L.transformPhrase=function(t,e,r){return F(t,e,r)};var N=L;function A(t,e,r){if(e.urls)r=e.urls[r]||r;else if(e.param){var o;(o={})[e.param]=r,r=o}t.show(r)}var B={good:"check",error:"warning",saving:"refresh fa-spin"},C={good:"Ok",error:"Error",saving:"Connecting..."};function G(t,e,r){for(var o=0;o<r.length;o++)t[r[o]]=e[o+1]?e[o+1].page:""}var D=window.webix;D&&m(D);var M={UnloadGuard:function(t,e,r){e.on(t,"app:guard",function(t,o,n){if(o===e||o.contains(e)){var i=r();n.confirm=!1===i?Promise.reject(i):n.confirm.then(function(){return i})}})},Locale:function(t,e,o){var n=(o=o||{}).storage,i=n?n.get("lang")||"en":o.lang||"en";function s(e,r,s){r.__esModule&&(r=r.default);var a={phrases:r};o.polyglot&&t.webix.extend(a,o.polyglot);var c=u.polyglot=new N(a);if(c.locale(e),u._=t.webix.bind(c.t,c),i=e,n&&n.put("lang",i),o.webix){var l=o.webix[e];l&&t.webix.i18n.setLocale(l)}return s?Promise.resolve():t.refresh()}function a(t,e){if(!1!==o.path){var n=(o.path?o.path+"/":"")+t;s(t,r(16)("./"+n),e)}}var u={getLang:function(){return i},setLang:a,setLangData:s,_:null,polyglot:null};t.setService("locale",u),a(i,!0)},Menu:function(t,e,r){var o=e.getSubViewInfo().parent,n=e.$$(r.id||r),i=!1;n.attachEvent("onchange",function(){i||A(o,r,this.getValue())}),n.attachEvent("onafterselect",function(){if(!i){var t=null;n.setValue?t=this.getValue():n.getSelectedId&&(t=n.getSelectedId()),A(o,r,t)}}),e.on(t,"app:route",function(){var t="";if(r.param)t=e.getParam(r.param,!0);else{var s=o.getUrl()[1];s&&(t=s.page)}t&&(i=!0,n.setValue&&n.getValue()!==t?n.setValue(t):n.select&&n.exists(t)&&n.getSelectedId()!==t&&n.select(t),i=!1)})},Theme:function(t,e,r){var o=(r=r||{}).storage,n=o?o.get("theme")||"flat-default":r.theme||"flat-default",i={getTheme:function(){return n},setTheme:function(e,r){for(var i=e.split("-"),s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var u=s[a].getAttribute("title");u&&(u===e||u===i[0]?s[a].disabled=!1:s[a].disabled=!0)}t.webix.skin.set(i[0]),t.webix.html.removeCss(document.body,"theme-"+n),t.webix.html.addCss(document.body,"theme-"+e),n=e,o&&o.put("theme",e),r||t.refresh()}};t.setService("theme",i),i.setTheme(n,!0)},User:function(t,e,r){var o=(r=r||{}).login||"/login",n=r.logout||"/logout",i=r.afterLogin||t.config.start,s=r.afterLogout||"/login",a=r.ping||3e5,u=r.model,c=r.user,l={getUser:function(){return c},getStatus:function(t){return t?u.status().catch(function(){return null}).then(function(t){c=t}):null!==c},login:function(e,r){return u.login(e,r).then(function(e){if(c=e,!e)throw new Error("Access denied");t.callEvent("app:user:login",[c]),t.show(i)})},logout:function(){return c=null,u.logout().then(function(e){return t.callEvent("app:user:logout",[]),e})}};function p(t,e){t===n?(l.logout(),e.redirect=s):t===o||l.getStatus()||(e.redirect=o)}t.setService("user",l),t.attachEvent("app:guard",function(t,e,o){return!(!r.public||!r.public(t))||(void 0===c&&(o.confirm=l.getStatus(!0).then(function(){return p(t,o)})),p(t,o))}),a&&setInterval(function(){return l.getStatus(!0)},a)},Status:function(t,e,r){var o="good",n=0,i=!1,s=r.expire;s||!1===s||(s=2e3);var a=r.texts||C,u=r.icons||B;function c(t){var n=e.$$(r.target);n&&(t||(t="<div class='status_"+o+"'><span class='webix_icon fa-"+u[o]+"'></span> "+a[o]+"</div>"),n.setHTML(t))}function l(){n--,d("good")}function p(t){n--,d("error",t)}function f(t){n++,d("saving"),t&&t.then&&t.then(l,p)}function h(){0===n&&c(" ")}function d(e,r){n<0&&(n=0),"saving"===e?(o="saving",c()):(i="error"===e,0===n&&(o=i?"error":"good",i?t.error("app:error:server",[r.responseText||r]):s&&setTimeout(h,s),c()))}function w(r){var o=t.webix.dp(r);o&&(e.on(o,"onAfterDataSend",f),e.on(o,"onAfterSaveError",function(t,e,r){return p(r)}),e.on(o,"onAfterSave",l))}"string"==typeof r&&(r={target:r}),t.setService("status",{getStatus:function(){return o},setStatus:d,track:w}),r.remote&&e.on(t.webix,"onRemoteCall",f),r.ajax&&e.on(t.webix,"onBeforeAjax",function(t,e,r,o,n,i,s){f(s)}),r.data&&w(r.data)},UrlParam:function(t,e,r){var o=r.route||r,n={};e.on(t,"app:urlchange",function(t,r){e===t&&(G(n,r.suburl(),o),r.size(o.length+1))});var i=e.setParam,s=e.getParam;e.setParam=function(t,r,s){var a=o.indexOf(t);return a>=0?(n[t]=r,this._segment.update("",r,a+1),s?e.show(null):void 0):i.call(this,t,r,s)},e.getParam=function(t,e){var r=n[t];return void 0!==r?r:s.call(this,t,e)},G(n,e.getUrl(),o)}},U=window;U.Promise||(U.Promise=U.webix.promise)},function(t,e,r){"use strict";r.r(e);var o=r(1);var n=500,i=300,s=5,a={group_name:webix.rules.isNotEmpty},u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.config=function(){var t=this,e=this.app.getService("locale")._;return{view:"window",localId:"windowForm",head:{localId:"windowHeader",template:"Add Group"},position:"center",modal:!0,body:{view:"form",localId:"groupForm",width:n,height:i,margin:s,elements:[{view:"text",label:e("Group name"),labelWidth:120,name:"group_name",invalidMessage:e("must be filled")},{view:"spacer"},{view:"button",localId:"saveBtn",type:"form",label:"Add group",click:function(){"edit"===t._mode?t.editGroup():t.addGroup()}},{view:"button",label:e("Cancel"),click:function(){t.hideWindow()}}],rules:a}}},e.prototype.showWindow=function(t,e,r,o){this._mode=r,this.getRoot().show(),this.changeTextInForm(o),"edit"===this._mode&&this.$$("groupForm").setValues(e),this.changeTextInForm(o)},e.prototype.changeTextInForm=function(t){var e=this.app.getService("locale")._,r=this.$$("windowHeader"),o=this.$$("saveBtn");r.define("template",e(t.header)),o.define("label",e(t.saveBtn)),r.refresh(),o.refresh()},e.prototype.hideWindow=function(){this.$$("groupForm").clear(),this.$$("groupForm").clearValidation(),this.getRoot().hide()},e.prototype.addGroup=function(){if(this.$$("groupForm").validate()){var t=this.$$("groupForm").getValues(),e=webix.Date.dateToStr("%d-%m-%Y");t.create_date=e(new Date),this.app.callEvent("addGroupinList",[t])}},e.prototype.editGroup=function(){if(this.$$("groupForm").validate()){var t=this.$$("groupForm").getValues();this.app.callEvent("editGroupinList",[t])}},e}(o.c);e.default=u},function(t,e,r){"use strict";r.r(e);var o=r(1),n=r(0),i=r(5);var s=500,a=300,u=5,c={value:webix.rules.isNotEmpty,translate:webix.rules.isNotEmpty,part_id:webix.rules.isNotEmpty},l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.config=function(){var t=this,e=this.app.getService("locale")._;return{view:"window",localId:"windowForm",head:{localId:"windowHeader",template:"Add Word"},position:"center",modal:!0,body:{view:"form",localId:"wordForm",width:s,height:a,margin:u,elements:[{view:"text",label:e("English"),labelWidth:120,name:"value",invalidMessage:e("must be filled")},{view:"text",label:e("Russian"),labelWidth:120,name:"translate",invalidMessage:e("must be filled")},{view:"richselect",localId:"partSp",label:e("Part of speech"),labelWidth:120,name:"part_id",options:i.a,invalidMessage:e("must be filled")},{view:"spacer"},{view:"button",localId:"saveBtn",type:"form",label:"Add word",click:function(){"add"===t._mode?t.addWord():t.editWord()}},{view:"button",label:e("Cancel"),click:function(){t.hideWindow()}}],rules:c}}},e.prototype.init=function(){var t=this;this.on(this.app,"hideWordForm",function(){t.hideWindow()})},e.prototype.showWindow=function(t,e,r,o){if(this._selected_id=t,this._mode=r,this._selected_id&&"add"===this._mode)this.getRoot().show(),this.changeTextInForm(o);else if(this._selected_id&&"edit"===this._mode){this.getRoot().show(),this.changeTextInForm(o);var n=e;this.$$("wordForm").setValues(n)}else webix.message("You need to choose word group!")},e.prototype.changeTextInForm=function(t){var e=this.app.getService("locale")._,r=this.$$("windowHeader"),o=this.$$("saveBtn");r.define("template",e(t.header)),o.define("label",e(t.saveBtn)),r.refresh(),o.refresh()},e.prototype.hideWindow=function(){this.$$("wordForm").clear(),this.$$("wordForm").clearValidation(),this.getRoot().hide()},e.prototype.addWord=function(){if(this.$$("wordForm").validate()){var t=this.$$("wordForm").getValues();t.group_id=this._selected_id,this.app.callEvent("addWordToTable",[t]),this.app.callEvent("hideWordForm")}},e.prototype.editWord=function(){var t=this;if(this.$$("wordForm").validate()){var e=this.$$("wordForm").getValues();fetch(n.a+"words/update",{method:"POST",body:JSON.stringify(e)}).then(function(t){return t.json()}).then(function(e){"updated"===e.status?t.app.callEvent("editWordinTable",[e]):(t.app.callEvent("hideWordForm"),t.app.callEvent("changeAccess"))}).catch(function(){t.app.callEvent("hideWordForm"),webix.message("Server error, try again")})}},e}(o.c);e.default=l},function(t,e,r){"use strict";r.r(e);var o=r(1),n=r(0);var i=500,s=300,a=5,u=100,c={userName:webix.rules.isNotEmpty,userEmail:webix.rules.isEmail,userPass:webix.rules.isNotEmpty},l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.config=function(){var t=this,e=this.app.getService("locale")._;return{view:"window",localId:"windowForm",head:{localId:"windowHeader",cols:[{view:"spacer"},{view:"label",label:e("Registration"),localId:"headText"},{view:"button",label:e("Log-in"),localId:"transform-btn",width:u,click:function(){"reg"===t._formIndicate?t.logTransform():t.regTransform(),t.defineTemplate("")}}]},position:"center",modal:!0,body:{rows:[{view:"form",localId:"userForm",margin:a,width:i,height:s,elements:[{view:"text",localId:"user_name",label:e("Login"),name:"userName",placeholder:e("Type username"),invalidMessage:e("must be filled")},{view:"text",label:e("Email"),localId:"userEmail",name:"userEmail",placeholder:e("Type email"),invalidMessage:e("must be Email")},{view:"text",type:"password",localId:"userPassword",label:e("Password"),name:"userPass",placeholder:e("Type password"),invalidMessage:e("must be fill")},{view:"template",localId:"messageTemplate",type:"clean",template:""},{view:"button",localId:"sendBtn",type:"form",label:"Register",click:function(){"reg"===t._formIndicate?t.regData():t.logData()}}],rules:c}]}}},e.prototype.init=function(){this._formIndicate="reg"},e.prototype.showWindow=function(){this.regTransform(),this.getRoot().show()},e.prototype.hideWindow=function(){this.$$("userForm").clear(),this.getRoot().hide()},e.prototype.regData=function(){var t=this,e=this.$$("userForm");if(e.validate()){var r=e.getValues();fetch(n.a+"register",{method:"POST",body:JSON.stringify(r)}).then(function(t){return t.json()}).then(function(r){"regOK"===r.status?(t.defineTemplate(""),e.clear(),e.clearValidation(),t.hideWindow(),t.app.callEvent("showTopView"),t.app.callEvent("fillViews"),t.app.callEvent("defineUserName",[r.userName])):(e.clear(),e.clearValidation(),t.defineTemplate(t.getTemplate(r.messages)),e.setValues(r.formData))}).catch(function(){webix.message("Server error, try again")})}},e.prototype.defineTemplate=function(t){this.$$("messageTemplate").define("template",t),this.$$("messageTemplate").refresh()},e.prototype.getTemplate=function(t){var e="";if(t.isUser)return"<div class=\"form-template-wrapp\">\n                        <p class='form-message'>"+t.isUser+"</p>\n                    </div>";for(var r in t)e+="<p class='form-message'>"+t[r]+"</p>";return'<div class="form-template-wrapp">'+e+"</div>"},e.prototype.logData=function(){var t=this,e=this.$$("userForm"),r=e.getValues();delete r.userName,e.validate()&&fetch(n.a+"login",{method:"POST",body:JSON.stringify(r)}).then(function(t){return t.json()}).then(function(r){"logOK"===r.status?(t.defineTemplate(""),e.clear(),e.clearValidation(),t.hideWindow(),t.app.callEvent("showTopView"),t.app.callEvent("fillViews"),t.app.callEvent("defineUserName",[r.userName])):(e.clear(),e.clearValidation(),t.defineTemplate(t.getTemplate(r.messages)),e.setValues(r.formData))}).catch(function(){webix.message("Server error, try again")})},e.prototype.regTransform=function(){var t=this.app.getService("locale")._;this.changeForm(t("Registration"),t("Log"),t("Register"),"show"),this._formIndicate="reg"},e.prototype.logTransform=function(){var t=this.app.getService("locale")._;this.changeForm(t("Log-in"),t("Reg"),t("Log-in"),"hide"),this._formIndicate="log"},e.prototype.changeForm=function(t,e,r,o){var n=this.$$("headText"),i=this.$$("transform-btn"),s=this.$$("sendBtn"),a=this.$$("user_name");"hide"===o?a.hide():a.show(),n.define("label",t),i.define("label",e),s.define("label",r),n.refresh(),i.refresh(),s.refresh()},e}(o.c);e.default=l},function(t,e,r){"use strict";r.d(e,"a",function(){return n});var o=r(0),n=new webix.DataCollection({url:o.a+"part"})},function(t,e,r){"use strict";r.r(e);var o=r(1),n=r(0);var i={col_1:40,col_3:120,col_4:100},s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.config=function(){var t=this.app.getService("locale")._;return{view:"datatable",localId:"scoreboard",css:"word-table",select:!0,columns:[{id:"id",header:"№",width:i.col_1},{id:"date",header:t("Date"),width:i.col_2,fillspace:!0},{id:"score",header:t("Score"),width:i.col_3},{id:"out_of",header:t("Out of"),width:i.col_4}]}},e.prototype.init=function(){var t=this;fetch(n.a+"checkSession").then(function(t){return t.json()}).then(function(e){"accessOK"===e.status?t.$$("scoreboard").load(n.a+"score"):(t.$$("scoreboard").clearAll(),t.app.callEvent("changeAccess"),t.show("/top/words"))}).catch(function(){webix.message("Server error, try later")})},e}(o.c);e.default=s},function(t,e,r){"use strict";r.r(e);var o=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.config=function(){var t=this,e=this.app.getService("locale").getLang();return{rows:[{cols:[{view:"spacer"},{template:(0,this.app.getService("locale")._)("Language"),type:"header",borderless:!0,css:"settings-lang-header"},{view:"spacer"}]},{view:"segmented",localId:"localizationSegm",options:[{id:"ru",value:"RU"},{id:"en",value:"ENG"}],value:e,click:function(){t.toggleLanguage()}},{view:"spacer"}]}},e.prototype.toggleLanguage=function(){var t=this.app.getService("locale"),e=this.$$("localizationSegm").getValue();t.setLang(e)},e}(r(1).c);e.default=o},function(t,e,r){"use strict";r.r(e);var o=r(1),n=r(0);var i=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.config=function(){var t=this,e=this.app.getService("locale")._;return{rows:[{cols:[{},{view:"richselect",label:e("Choose word group"),localId:"chooser",css:"group-chooser",labelWidth:160,labelPosition:"top",labelAlign:"center",autoHeight:!1,suggest:{url:n.a+"groups",body:{template:"#group_name#"}}},{}]},{localId:"startBtnRow",cols:[{view:"spacer"},{view:"button",type:"form",css:"start-test-btn",label:e("Start test"),click:function(){t.getWords()}},{view:"spacer"}]},{view:"form",localId:"testForm",css:"test-form",autoheight:!1,elements:[{rows:[{localId:"taskRow1",rows:[{cols:[{view:"spacer"},{template:"Word 1",localId:"word1",height:40,css:"task-word",borderless:!0},{view:"spacer"}]},{localId:"aButtonsWrap",cols:[{view:"button",localId:"1Btn1",type:"form",label:"translate 1"},{view:"button",localId:"1Btn2",type:"form",label:"translate 2"},{view:"button",localId:"1Btn3",type:"form",label:"translate 3"},{view:"button",localId:"1Btn4",type:"form",label:"translate 4"}]}]},{localId:"taskRow2",rows:[{cols:[{view:"spacer"},{template:"Word 2",localId:"word2",height:40,css:"task-word",borderless:!0},{view:"spacer"}]},{localId:"bButtonsWrap",cols:[{view:"button",localId:"2Btn1",type:"form",label:"translate 1"},{view:"button",localId:"2Btn2",type:"form",label:"translate 2"},{view:"button",localId:"2Btn3",type:"form",label:"translate 3"},{view:"button",localId:"2Btn4",type:"form",label:"translate 4"}]}]},{localId:"taskRow3",rows:[{cols:[{view:"spacer"},{template:"Word 3",localId:"word3",height:40,css:"task-word",borderless:!0},{view:"spacer"}]},{localId:"cButtonsWrap",cols:[{view:"button",localId:"3Btn1",type:"form",label:"translate 1"},{view:"button",localId:"3Btn2",type:"form",label:"translate 2"},{view:"button",localId:"3Btn3",type:"form",label:"translate 3"},{view:"button",localId:"3Btn4",type:"form",label:"translate 4"}]}]},{localId:"taskRow4",rows:[{cols:[{view:"spacer"},{template:"Word 4",localId:"word4",height:40,css:"task-word",borderless:!0},{view:"spacer"}]},{localId:"dButtonsWrap",cols:[{view:"button",localId:"4Btn1",type:"form",label:"translate 1"},{view:"button",localId:"4Btn2",type:"form",label:"translate 2"},{view:"button",localId:"4Btn3",type:"form",label:"translate 3"},{view:"button",localId:"4Btn4",type:"form",label:"translate 4"}]}]},{localId:"taskRow5",rows:[{cols:[{view:"spacer"},{template:"Word 5",localId:"word5",height:40,css:"task-word",borderless:!0},{view:"spacer"}]},{localId:"eButtonsWrap",cols:[{view:"button",localId:"5Btn1",type:"form",label:"translate 1"},{view:"button",localId:"5Btn2",type:"form",label:"translate 2"},{view:"button",localId:"5Btn3",type:"form",label:"translate 3"},{view:"button",localId:"5Btn4",type:"form",label:"translate 4"}]}]}]}]},{cols:[{view:"button",localId:"endTask",css:"end-test-btn",type:"form",label:e("End test"),width:150,click:function(){t.endTest()}},{view:"button",localId:"restartTask",type:"form",css:"restart-test-btn",label:e("Restart test"),width:150,click:function(){t.refresh()}},{view:"spacer"}]}]}},e.prototype.init=function(){for(var t=this,e=["addGroupinList","addWordToTable","editWordinTable","editGroupinList"],r=0;r<e.length;r++)this.app.detachEvent(e[r]);for(var o=1;o<=5;o++)this.$$("taskRow"+o).hide();this.$$("endTask").disable(),this.$$("restartTask").disable(),fetch(n.a+"checkSession").then(function(t){return t.json()}).then(function(e){"accessOK"!==e.status&&(t.app.callEvent("changeAccess"),t.show("/top/words"))}).catch(function(){webix.message("Server error, try later")})},e.prototype.startTest=function(t){var e=this,r={},o=[];this._currentScore=[],this._maxCurrentResult=[];for(var n=t.length>=5?5:t.length,i=n,s=0;s<t.length;s++)r[t[s].id]=[t[s].value,t[s].translate,t[s].part_id-1],o.push(t[s].id);for(var a=function(t){o.length&&e.$$("taskRow"+t).show();var i=[1,2,3,4],s=o.slice(),a=Math.floor(Math.random()*s.length);e["_rightNumWord"+t]=s.splice(a,1)[0],o.splice(a,1),e.$$("word"+t).define("template",r[e["_rightNumWord"+t]][0]),e.$$("word"+t).refresh();for(var u=0;u<s.length;u++)r[s[u]][2]!==r[e["_rightNumWord"+t]][2]&&(s.splice(u,1),u--);var c=Math.floor(Math.random()*i.length),l=i.splice(c,1)[0];for(e["_"+t+"Btn"+l]=e["_rightNumWord"+t],e.$$(t+"Btn"+l).define("label",r[e["_rightNumWord"+t]][1]),e.$$(t+"Btn"+l).refresh(),0===r[e["_rightNumWord"+t]][2]||1===r[e["_rightNumWord"+t]][2]?e._maxCurrentResult.push(2):e._maxCurrentResult.push(1),e.$$(t+"Btn"+l).attachEvent("onItemClick",function(){webix.message({text:"Excellent! This answer is true!",type:"success "}),0===r[e["_rightNumWord"+t]][2]||1===r[e["_rightNumWord"+t]][2]?e._currentScore.push(2):e._currentScore.push(1);for(var o=1;o<=4;o++)e.$$(t+"Btn"+o).disable();if(0===--n){var i=e._currentScore.reduce(function(t,e){return t+e}),s=e._maxCurrentResult.reduce(function(t,e){return t+e});e.$$("endTask").disable(),e.setScore(i,s),webix.alert({title:"Test result",ok:"Ok",text:i+" out of "+s,callback:function(){e.$$("restartTask").enable()}})}});i.length>0;){var p=Math.floor(Math.random()*i.length),f=i.splice(p,1)[0];if(s.length){var h=Math.floor(Math.random()*s.length),d=s.splice(h,1)[0];e["_"+t+"Btn"+f]=d,e.$$(t+"Btn"+f).define("label",r[e["_"+t+"Btn"+f]][1]),e.$$(t+"Btn"+f).refresh(),e.$$(t+"Btn"+f).attachEvent("onItemClick",function(){webix.message({text:"Incorrect answer :(",type:"error"}),e._currentScore.push(0);for(var r=1;r<=4;r++)e.$$(t+"Btn"+r).disable();if(0===--n){var o=e._currentScore.reduce(function(t,e){return t+e}),i=e._maxCurrentResult.reduce(function(t,e){return t+e});e.$$("endTask").disable(),e.setScore(o,i),webix.alert({title:"Test result",ok:"Ok",text:o+" out of "+i,callback:function(){e.$$("restartTask").enable()}})}})}else e.$$(t+"Btn"+f).define("label",""),e.$$(t+"Btn"+f).refresh(),e.$$(t+"Btn"+f).disable()}},u=1;u<=i;u++)a(u)},e.prototype.getWords=function(){var t=this,e=this.$$("chooser").getValue();e?(this.$$("chooser").disable(),this.$$("startBtnRow").disable(),fetch(n.a+"words/test_words",{method:"POST",body:JSON.stringify({group_id:e})}).then(function(t){return t.json()}).then(function(e){e.length?(t.startTest(e),t.$$("endTask").enable()):(t.$$("chooser").enable(),t.$$("startBtnRow").enable(),webix.message("Pleace, add words to this group!"))}).catch(function(){t.$$("chooser").enable(),t.$$("startBtnRow").enable(),webix.message("Server error, pleace try again!")})):webix.message("Pleace, select word group!")},e.prototype.endTest=function(){var t=this;webix.confirm({title:"End test",text:"Do You want to end this test?",type:"confirm-warning",callback:function(e){e&&t.refresh()}})},e.prototype.setScore=function(t,e){var r=this,o=webix.Date.dateToStr("%d-%M-%Y %G:%i:%s")(new Date);fetch(n.a+"score/add",{method:"POST",body:JSON.stringify({date:o,score:t,out_of:e})}).then(function(t){return t.json()}).then(function(t){t.status&&(r.app.callEvent("changeAccess"),r.show("/top/words"))}).catch(function(){webix.message("Server error, pleace try again!")})},e}(o.c);e.default=i},function(t,e,r){"use strict";r.r(e);var o=r(1),n=r(4),i=r(0);var s=180,a=150,u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.config=function(){var t=this,e=this.app.getService("locale")._,r={view:"menu",id:"top:menu",width:s,layout:"y",select:!0,template:"<span class='webix_icon #icon#'></span> #value# ",data:[{value:e("My words"),id:"words",icon:"wxi-columns"},{value:e("Test"),id:"test",icon:"wxi-pencil"},{value:e("Scoreboard"),id:"scoreboard",icon:"wxi-file"},{value:e("Settings"),id:"settings",icon:"wxi-dots"}],on:{onAfterSelect:function(e){t.changeHeader(e)}}};return{localId:"topUi",rows:[{cols:[{localId:"header",template:"Contacts",type:"header"},{template:"No Name",css:"user-name-teplate",localId:"userName",borderless:!0},{view:"button",label:e("Log out"),css:"log-out-btn",type:"form",width:a,click:function(){t.logOut()}}]},{cols:[r,{$subview:!0}]}]}},e.prototype.init=function(){var t=this;this.use(o.d.Menu,"top:menu"),this.on(this.app,"showTopView",function(){t.$$("topUi").show()}),this.on(this.app,"hideTopView",function(){t.$$("topUi").hide()}),this.on(this.app,"changeAccess",function(){t.app.callEvent("hideTopView"),t.app.callEvent("clearViews"),t.popupWindowForm.showWindow()}),this.on(this.app,"checkSession",function(){t.checkSession()}),this.on(this.app,"defineUserName",function(e){t.$$("userName").define("template",e),t.$$("userName").refresh()}),this.popupWindowForm=this.ui(n.default),this.app.callEvent("hideTopView"),this.app.callEvent("checkSession")},e.prototype.changeHeader=function(t){var e=this.$$("header");e.define({template:this.$$("top:menu").getItem(t).value}),e.refresh()},e.prototype.checkSession=function(){var t=this;fetch(i.a+"checkSession").then(function(t){return t.json()}).then(function(e){"accessOK"===e.status?(t.popupWindowForm.hideWindow(),t.app.callEvent("showTopView"),t.app.callEvent("defineUserName",[e.userName])):(t.popupWindowForm.showWindow(),t.app.callEvent("hideTopView"))}).catch(function(){webix.message(_("Server error, try later"))})},e.prototype.logOut=function(){var t=this;fetch(i.a+"logout").then(function(t){return t.json()}).then(function(e){"logOutSuccess"===e.status?(t.app.callEvent("hideTopView"),t.app.callEvent("clearViews"),t.popupWindowForm.showWindow(),t.show("/top/words")):t.app.callEvent("changeAccess")}).catch(function(){webix.message(_("Server error, try later"))})},e}(o.c);e.default=u},function(t,e,r){"use strict";r.r(e);var o=r(1),n=r(3),i=r(2),s=r(0),a=r(5);var u=230,c=40,l=200,p=200,f={header:"Add Group",saveBtn:"Add group"},h={header:"Edit Group",saveBtn:"Save group"},d={header:"Add Word",saveBtn:"Add word"},w={header:"Edit Word",saveBtn:"Save word"},g=67,v=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.config=function(){var t=this,e=this.app.getService("locale")._,r={view:"list",localId:"groupList",css:"group-list",template:'\n                    <div class="group-list-template-wrap">\n                        <p class="group-name">#group_name#</p>\n                        <p class="group-word-count">'+e("Words count")+': #words_count#</p>\n                        <p class="group-date">'+e("Create")+": #create_date#</p>\n                    </div>\n                ",select:!0,type:{height:g},on:{onAfterSelect:function(e){t.filterTable(e)}}},o={view:"datatable",localId:"wordTable",css:"word-table",columns:[{id:"value",header:e("English"),fillspace:!0,css:"word-table-col-1"},{id:"translate",header:e("Russian"),width:l,css:"word-table-col-2"},{id:"part_id",header:e("Part of speach"),collection:a.a,width:p,css:"word-table-col-3"}],scrollX:!1,select:!0};return{cols:[{rows:[{template:e("Group words"),css:"list-group-head",height:c},r,{view:"button",type:"form",label:e("Add group"),css:"add-group-btn",click:function(){t.addGroup()}},{view:"button",type:"form",label:e("Edit group"),css:"edit-group-btn",click:function(){t.editGroup()}},{view:"button",label:e("Delete group"),css:"del-group-btn",click:function(){t.deleteGroup()}}],width:u},{rows:[o,{view:"button",label:e("Export group to excel"),css:"export-word-btn",click:function(){t.exportToExcel()}},{view:"button",type:"form",css:"add-word-btn",label:e("Add word"),click:function(){t.addWord()}},{view:"button",type:"form",label:e("Edit word"),css:"edit-word-btn",click:function(){t.editWord()}},{view:"button",label:e("Delete word"),css:"del-word-btn",click:function(){t.deleteWord()}}]}]}},e.prototype.init=function(){var t=this;this.popupWindowForm=this.ui(n.default),this.popupWindowGroupForm=this.ui(i.default),this.on(this.app,"clearViews",function(){t.$$("groupList").clearAll(),t.$$("wordTable").clearAll()}),this.on(this.app,"fillViews",function(){t.$$("groupList").load(s.a+"groups"),t.$$("wordTable").load(s.a+"words")}),this.app.attachEvent("addWordToTable",function(e){webix.ajax().post(s.a+"words",JSON.stringify(e)).then(function(t){return t=t.json()}).then(function(e){if("added"===e.status){var r=t.$$("wordTable"),o=t.$$("groupList"),n={words_count:e.words_count};o.updateItem(e.group_id,n),r.clearAll(),r.load(s.a+"words").then(function(){t.filterTable(e.group_id)})}else t.app.callEvent("hideWordForm"),t.app.callEvent("changeAccess")}).catch(function(){t.app.callEvent("hideWordForm"),webix.message("Server error, try again")})}),this.app.attachEvent("editWordinTable",function(e){var r=t.$$("wordTable"),o=r.getSelectedId();r.updateItem(o.row,e),t.popupWindowForm.hideWindow()}),this.app.attachEvent("addGroupinList",function(e){webix.ajax().post(s.a+"/groups/add",JSON.stringify(e)).then(function(t){return t=t.json()}).then(function(e){"added"===e.status?(t.$$("groupList").add(e),t.popupWindowGroupForm.hideWindow()):(t.popupWindowGroupForm.hideWindow(),t.app.callEvent("changeAccess"))}).catch(function(){console.log("catch error"),t.popupWindowGroupForm.hideWindow(),webix.message("Server error, try again")})}),this.app.attachEvent("editGroupinList",function(e){fetch(s.a+"groups/update",{method:"POST",body:JSON.stringify(e)}).then(function(t){return t.json()}).then(function(e){"updated"===e.status?(t.$$("groupList").updateItem(e.id,e),t.popupWindowGroupForm.hideWindow()):(t.popupWindowGroupForm.hideWindow(),t.app.callEvent("changeAccess"))}).catch(function(){t.popupWindowGroupForm.hideWindow(),webix.message("Server error, try again")})}),this.app.callEvent("fillViews")},e.prototype.exportToExcel=function(){var t=this.$$("groupList").getSelectedId();if(t){var e=this.$$("groupList").getItem(t).group_name;webix.toExcel(this.$$("wordTable"),{filename:"words - group_"+e,name:"words - group_"+e})}else webix.toExcel(this.$$("wordTable"),{filename:"words - all",name:"words - all"})},e.prototype.addGroup=function(){this.popupWindowGroupForm.showWindow("","","add",f)},e.prototype.editGroup=function(){var t=this.$$("groupList").getSelectedId();if(t){var e=this.$$("groupList").getItem(t);this.popupWindowGroupForm.showWindow(e.id,e,"edit",h)}else webix.message("You need to choose group!")},e.prototype.filterTable=function(t){this.$$("wordTable").filter(function(e){return e.group_id==t})},e.prototype.addWord=function(){var t=this.$$("groupList").getSelectedId();this.popupWindowForm.showWindow(t,"","add",d)},e.prototype.editWord=function(){var t=this.$$("wordTable").getSelectedId();if(t){var e=this.$$("wordTable").getItem(t);this.popupWindowForm.showWindow(e.group_id,e,"edit",w)}else webix.message("You need to choose word!")},e.prototype.deleteWord=function(){var t=this,e=this.$$("wordTable").getSelectedId();e?webix.confirm({title:"Delete",text:"Do You want to delete this word?",type:"confirm-warning",callback:function(r){if(r){var o=t.$$("wordTable").getItem(e);fetch(s.a+"words/delete",{method:"POST",body:JSON.stringify(o)}).then(function(t){return t.json()}).then(function(e){if("deleted"===e.status){var r=t.$$("groupList");t.$$("wordTable").remove(e.id);var o={words_count:e.words_count};r.updateItem(e.group_id,o)}else t.app.callEvent("changeAccess")}).catch(function(){webix.message("Server error, try again")})}}}):webix.message("You need to choose word!")},e.prototype.deleteGroup=function(){var t=this,e=this.$$("groupList"),r=e.getSelectedId(),o=e.getItem(r);r?webix.confirm({title:"Delete",text:"Do You want to delete this group?",type:"confirm-warning",callback:function(r){r&&fetch(s.a+"groups/delete",{method:"POST",body:JSON.stringify(o)}).then(function(t){return t.json()}).then(function(r){if("deleted"===r.status){e.remove(r.id);var o=t.$$("wordTable");o.clearAll(),o.load(s.a+"words")}else t.app.callEvent("changeAccess")}).catch(function(){webix.message("Server error, try again")})}}):webix.message("You need to choose group!")},e}(o.c);e.default=v},function(t,e,r){"use strict";r.r(e),e.default={"My words":"My words",Test:"Test",Scoreboard:"Scoreboard",Settings:"Settings","No Name":"No Name","Log out":"Log out","Group words":"Group words","Add group":"Add group","Edit group":"Edit group","Delete group":"Delete group","Export group to excel":"Export group to excel","Add word":"Add word","Edit word":"Edit word","Delete word":"Delete word","Words count":"Words count",Create:"Create",Russian:"Russian","Part of speach":"Part of speach",English:"English","Choose word group":"Choose word group","Start test":"Start test","End test":"End test","Restart test":"Restart test",Date:"Date",Score:"Score","Out of":"Out of",Language:"Language",Log:"Log",Login:"Login",Email:"Email",Password:"Password",Register:"Register","Type username":"Type username","Type email":"Type email","Type password":"Type password",Registration:"Registration",Reg:"Reg","Log-in":"Log-in","must be filled":"must be filled","must be Email":"must be Email","must be fill":"must be fill","Group name":"Group name",Cancel:"Cancel","Add Group":"Add Group","Save group":"Save group","Edit Group":"Edit Group","Part of speech":"Part of speech","Add Word":"Add Word","Save word":"Save word","Edit Word":"Edit Word"}},function(t,e,r){"use strict";r.r(e),e.default={"My words":"Мои слова",Test:"Тест",Scoreboard:"Результаты",Settings:"Настройки","No Name":"Нет имени","Log out":"Выход","Group words":"Группы слов","Add group":"Добавить группу","Edit group":"Изменить группу","Delete group":"Удалить группу","Export group to excel":"Сохранить группу в excel","Add word":"Добавить слово","Edit word":"Редактировать слово","Delete word":"Удалить слово","Words count":"Кол-во слов",Create:"Создано",Russian:"Русский","Part of speach":"Часть речи",English:"Английский","Choose word group":"Выберите группу слов","Start test":"Начать тест","End test":"Завершить","Restart test":"Начать заново",Date:"Дата",Score:"Результат","Out of":"Из",Language:"Язык",Log:"Лог.",Login:"Логин",Email:"Емейл",Password:"Пароль",Register:"Регистрация","Type username":"Введите имя","Type email":"Введите емейл","Type password":"Введите пароль",Registration:"Регистрация",Reg:"Рег.","Log-in":"Логин","must be filled":"должно быть заполнено","must be Email":"должен быть емейл","must be fill":"должно быть заполнено","Group name":"Название гр.",Cancel:"Отмена","Add Group":"Добавить группу","Save group":"Сохранить","Edit Group":"Редактирование группы","Part of speech":"Часть речи","Add Word":"Добавить слово","Save word":"Сохранить","Edit Word":"Редактирование слова"}},function(t,e,r){"use strict";r.r(e);r(14);var o=r(1),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t};var i=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i={id:"undefined",version:"undefined",router:o.a,debug:!1,start:"/top/words"};return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n({},i,r)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(o.b);e.default=i,webix.ready(function(){var t=new i;t.use(o.d.Locale,{storage:webix.storage.local}),t.render()})},function(t,e,r){},function(t,e,r){var o={"./addGroupForm":2,"./addGroupForm.js":2,"./addWordForm":3,"./addWordForm.js":3,"./reg_form":4,"./reg_form.js":4,"./scoreboard":6,"./scoreboard.js":6,"./settings":7,"./settings.js":7,"./test":8,"./test.js":8,"./top":9,"./top.js":9,"./words":10,"./words.js":10};function n(t){var e=i(t);return r(e)}function i(t){if(!r.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}n.keys=function(){return Object.keys(o)},n.resolve=i,t.exports=n,n.id=15},function(t,e,r){var o={"./en":11,"./en.js":11,"./ru":12,"./ru.js":12};function n(t){var e=i(t);return r(e)}function i(t){if(!r.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}n.keys=function(){return Object.keys(o)},n.resolve=i,t.exports=n,n.id=16}]);